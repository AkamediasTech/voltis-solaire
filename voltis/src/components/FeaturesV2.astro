---
// FeaturesV2.astro - Version Material Design avec cartes élevées (Dynamic Config)
import { getConfig } from '../config';
import { iconRegistry, type IconName } from './icons/registry';

// Local type definitions for this component
interface FeatureItem {
  id: string;
  iconName: IconName;
  iconSize?: string; // Ex: "w-12 h-12", "w-16 h-16"
  title: string;
  description: string;
}

interface FeaturesSection {
  badge: string;
  title: string;
  titleHighlight: string;
  subtitle: string;
  features: FeatureItem[];
}

const config = getConfig();
const section = config.content.featuresSection as FeaturesSection;
---

<section class="py-20 bg-gray-50">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="text-center max-w-5xl mx-auto mb-20">
      <div class="inline-flex items-center gap-2 bg-edf-orange/10 backdrop-blur-sm px-4 py-2 rounded-full border border-edf-orange/20 mb-6">
        <span class="text-edf-orange text-sm font-semibold">{section.badge}</span>
      </div>
      
      <h2 class="text-3xl md:text-5xl lg:text-5xl font-bold text-gray-900 mb-4">
        {section.title} <span class="text-edf-blue">{section.titleHighlight}</span>
      </h2>
      <p class="text-lg text-gray-600">
        {section.subtitle}
      </p>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
      {section.features.map((feature) => {
        const IconComponent = iconRegistry[feature.iconName];
        
        return (
          <div class="relative mt-10 p-8 bg-white rounded-2xl shadow-sm border border-gray-100 hover:shadow-xl transition-shadow duration-300 flex flex-col items-center text-center group">
            {/* Icône circulaire positionnée en haut */}
            <div class="absolute -top-10 left-1/2 transform -translate-x-1/2">
              <div class="w-20 h-20 bg-white rounded-full flex items-center justify-center shadow-lg text-gray-400 group-hover:text-edf-orange group-hover:scale-110 transition-all duration-300 border-4 border-gray-50 group-hover:border-orange-50">
                {/* <IconComponent class="w-9 h-9" /> */}
                <IconComponent className={feature.iconSize || "w-9 h-9"} class={feature.iconSize || "w-9 h-9"} />
              </div>
            </div>
            
            {/* Contenu de la carte */}
            <div class="mt-8">
              <h3 class="text-xl font-bold text-edf-blue mb-3">
                {feature.title}
              </h3>
              <p class="text-gray-500 leading-relaxed text-sm">
                {feature.description}
              </p>
            </div>
            
            {/* Ligne décorative en bas */}
            <div class="mt-6 w-12 h-1 bg-gray-100 rounded-full group-hover:bg-edf-orange transition-colors duration-300"></div>
          </div>
        );
      })}
    </div>
  </div>
</section>
