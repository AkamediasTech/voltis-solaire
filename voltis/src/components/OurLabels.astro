---
// OurLabels.astro - Composant généralisé
import { getConfig } from '@config';

interface Label {
  title: string;
  description: string;
  image: string;
  imageAlt: string;
}

interface LabelsConfig {
  badge?: string;
  title: string;
  subtitle: string;
  labels: Label[];
}

interface Props {
  labels?: LabelsConfig;
}

const { labels: propLabels } = Astro.props;
const config = !propLabels ? getConfig() : null;
const labelsContent = propLabels || config?.content.labels;

// Hardcoded fallback
const HARDCODED_LABELS: LabelsConfig = {
  badge: "Nos certifications",
  title: "Une expertise certifiée",
  subtitle: "Faites confiance à des professionnels reconnus par les plus hautes instances du secteur.",
  labels: [
  {
    title: "QualiSol RGE",
    description: "Certification obligatoire pour bénéficier des aides de l'État et garantir une installation conforme.",
    image: "/rge-quali-sol-transparent.png",
    imageAlt: "Label QualiSol - Reconnu Garant de l'Environnement"
  },
  {
      title: "QualiPV",
      description: "Expertise reconnue dans l'installation de panneaux photovoltaïques.",
      image: "/rge_quali_pv_transparent.png",
      imageAlt: "RGE Quali PV"
  },
  {
    title: "TVA Réduite 5,5%",
    description: "Bénéficiez d'une TVA réduite à 5,5% sur l'installation de vos panneaux photovoltaïques.",
    image: "/logo-tva-5pourcent.png",
    imageAlt: "TVA réduite à 5,5%"
  },
    {
      title: "Partenaire EDF",
      description: "Installateur agréé du leader français de l'énergie.",
      image: "/edf_logo_transparent_600w.webp",
      imageAlt: "EDF"
    }
  ]
};

const labels = labelsContent || HARDCODED_LABELS;
---

<section class="py-20 bg-white">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    
    <!-- Badge + Titre + Sous-titre -->
    <div class="text-center mb-16">
      {labels.badge && (
        <div class="inline-flex items-center gap-2 bg-edf-orange/10 backdrop-blur-sm px-4 py-2 rounded-full border border-edf-orange/20 mb-6">
          <span class="text-edf-orange text-sm font-semibold">{labels.badge}</span>
        </div>
      )}
      
      <h2 class="text-3xl md:text-4xl lg:text-5xl font-bold text-gray-900 mb-4">
        {labels.title} <br/>
        <span class="text-edf-blue">pour votre tranquillité</span>
      </h2>
      
      <p class="text-lg md:text-xl text-gray-600 max-w-3xl mx-auto">
        {labels.subtitle}
      </p>
    </div>

    <!-- Grille de cartes enrichies -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
      {labels.labels.map( (label : Label) => (
        <div class="bg-white p-8 rounded-2xl shadow-[0_4px_20px_rgba(0,0,0,0.05)] border border-gray-100 flex flex-col items-center text-center hover:shadow-xl transition-all duration-300 group">
          <div class="w-50 h-24 rounded-2xl flex items-center justify-center mb-6">
            <img src={label.image} alt={label.imageAlt} loading="lazy" class="w-full h-full object-contain" />
          </div>
          <h3 class="text-xl font-bold text-gray-900 mb-3">
            {label.title}
          </h3>
          <p class="text-gray-600 text-sm leading-relaxed">
            {label.description}
          </p>
        </div>
      ))}
    </div>

  </div>
</section>
