---
// ProcessV2.astro - Version en grille de 4 cartes
import { Clipboard, Send, FileCheck, Wrench } from 'lucide-react';
import type { Step } from '@config/types';

interface Props {
  steps?: Step[];
  title?: string;
  subtitle?: string;
  description?: string;
}

const HARDCODED_STEPS: Step[] = [
  {
    number: "01",
    icon: "clipboard",
    title: "Conseil personnalisé offert",
    description: "Un expert vous accompagne pour définir la solution solaire la plus rentable et la mieux adaptée."
  },
  {
    number: "02",
    icon: "send",
    title: "Offre transparente",
    description: "Un devis complet et lisible. Aucun paiement avant l'installation : vous réglez une fois le chantier finalisé."
  },
  {
    number: "03",
    icon: "file-check",
    title: "Accompagnement administratif complet",
    description: "Déclarations, urbanisme, aides et primes : nous gérons tout de A à Z."
  },
  {
    number: "04",
    icon: "wrench",
    title: "Installation clé en main",
    description: "Installation soignée par des professionnels certifiés, avec une planification rapide après validation."
  }
];

const { 
  steps = HARDCODED_STEPS,
  title = 'Du diagnostic à la mise en service :',
  subtitle = 'Notre processus',
  description = 'Un parcours fluide, rapide, entièrement géré pour vous.'
} = Astro.props;

// Mapping des icônes
const iconComponents = {
  'clipboard': Clipboard,
  'send': Send,
  'file-check': FileCheck,
  'wrench': Wrench
};

type IconKey = keyof typeof iconComponents;
---

<section class="py-20 bg-white">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <!-- En-tête centré -->
    <div class="text-center mb-16">
      <div class="inline-flex items-center gap-2 bg-edf-orange/10 backdrop-blur-sm px-4 py-2 rounded-full border border-edf-orange/20 mb-6">
        <span class="text-edf-orange text-sm font-semibold">{subtitle}</span>
      </div>
      
      <h2 class="text-4xl md:text-5xl font-bold text-gray-900 mb-4">
        {title}<br />
        <span class="text-edf-blue">nos experts s'occupent de tout</span>
      </h2>
      <p class="text-xl text-gray-600 mt-6">
        {description}
      </p>
    </div>

    <!-- Grille de 4 cartes -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
      {steps.map((step) => {
        const IconComponent = iconComponents[step.icon as IconKey];
        return (
          <div class="bg-white border border-gray-200 rounded-2xl p-6 hover:shadow-xl transition-shadow duration-300 flex flex-col">
            <!-- Icône et numéro -->
            <div class="flex items-center gap-4 mb-6">
              <div class="w-14 h-14 rounded-full bg-orange-50 flex items-center justify-center flex-shrink-0">
                <IconComponent className="w-7 h-7 text-edf-orange" />
              </div>
              {/* Version avec bordure orange */}
              {/* <span class="text-6xl font-bold text-gray-100" style="-webkit-text-stroke: 2px rgba(255, 107, 53, 0.99);">{step.number}</span> */}
              {/* Version avec texte orange */}
              <span class="text-6xl font-bold text-edf-orange opacity-90">{step.number}</span>
            </div>

            <!-- Contenu -->
            <div class="flex-1">
              <h3 class="text-lg font-bold text-gray-900 mb-3 leading-tight">
                {step.title}
              </h3>
              <p class="text-gray-600 text-sm leading-relaxed">
                {step.description}
              </p>
            </div>
          </div>
        );
      })}
    </div>
  </div>
</section>
