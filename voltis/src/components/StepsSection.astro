---
import type { StepsConfig } from '@config/types';

interface Props {
  stepsSection?: StepsConfig;
  subtitle?: string;
  description?: string;
}

const HARDCODED_STEPS: StepsConfig = {
  title: 'Passez au solaire et réalisez jusqu\'à <span class="text-edf-blue">70%<sup>(1)</sup> d\'économies d\'énergie à l\'année</span>',
  steps: [
    {
      icon: '<svg xmlns="http://www.w3.org/2000/svg" width="56" height="56" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="text-edf-orange"><path d="M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8"/><path d="M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/></svg>',
      title: 'Une étude gratuite',
      description: 'pour une installation sur-mesure par notre Conseiller Solaire à votre domicile'
    },
    {
      icon: '<svg xmlns="http://www.w3.org/2000/svg" width="56" height="56" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="text-edf-orange"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="m16 11 2 2 4-4"/></svg>',
      title: 'Une validation technique',
      description: 'par nos experts pour confirmer la proposition du Conseiller Solaire. Elle se déroule à distance ou sur place'
    },
    {
      icon: '<svg xmlns="http://www.w3.org/2000/svg" width="56" height="56" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="text-edf-orange"><path d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"/><path d="M14 2v4a2 2 0 0 0 2 2h4"/><path d="m9 15 2 2 4-4"/></svg>',
      title: 'Démarches administratives prises en charge',
      description: 'pour vous simplifier la vie<sup>(4)</sup>'
    }
  ]
};

const { stepsSection = HARDCODED_STEPS, subtitle = 'Notre processus', description = 'Un parcours fluide, rapide, entièrement géré pour vous.' } = Astro.props;
const { title, steps } = stepsSection;
---

<section class="py-20 bg-gray-50">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    
    <!-- En-tête centré -->
    <div class="text-center mb-16">
      <div class="inline-flex items-center gap-2 bg-edf-orange/10 backdrop-blur-sm px-4 py-2 rounded-full border border-edf-orange/20 mb-6">
        <span class="text-edf-orange text-sm font-semibold">{subtitle}</span>
      </div>
      
      <h2 class="text-3xl md:text-4xl lg:text-5xl font-extrabold text-gray-900 leading-tight mb-4" set:html={title}>
      </h2>
      <p class="text-xl text-gray-600 mt-6">
        {description}
      </p>
    </div>

    <!-- Steps Container Box -->
    <div class="border border-gray-200 rounded-sm p-8 md:p-12 bg-white">
      <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-8 md:gap-4">
        
        {steps.map((step, index) => (
          <>
            <!-- Step -->
            <div class="flex-1 flex flex-col items-center text-center px-2">
              <div class="mb-6" set:html={step.icon}>
              </div>
              <h3 class="text-xl font-bold text-edf-orange mb-3 leading-tight" set:html={step.title}></h3>
              <p class="text-gray-800 text-sm leading-relaxed" set:html={step.description}>
              </p>
            </div>

            {/* Arrow separator (not after last step) */}
            {index < steps.length - 1 && (
              <div class="hidden md:flex items-center justify-center text-gray-800 w-12">
                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M5 12h14"/><path d="m12 5 7 7-7 7"/>
                </svg>
              </div>
            )}
          </>
        ))}

      </div>
    </div>

    <!-- CTA Button -->
    <div class="mt-16 text-center">
      <button 
        data-scroll-top
        class="cursor-pointer bg-edf-orange text-white font-bold py-4 px-10 rounded-full hover:bg-edf-orangeHover transition-colors shadow-lg shadow-orange-100 text-lg"
      >
        Je demande mon Bilan gratuit
      </button>
    </div>

  </div>
</section>
